<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Happy Birthday ğŸ‰</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Scheherazade+New:wght@400;700&display=swap');
:root{
    --black:#0b0b0b; 
    --brown:#6b4f34; 
    --sky:#6fb7ff; 
    --text:#f5f7fa; 
    --muted:#c7d2fe; 
    --glass: rgba(255,255,255,.06);
    --glow: 0 0 40px rgba(111,183,255,.25);
}
*{box-sizing:border-box}
html,body{height:100%}
body{
    margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, "Noto Naskh Arabic UI", Tahoma, Arial, sans-serif;
    background: radial-gradient(1200px 800px at 80% -10%, rgba(111,183,255,.12), transparent 60%),
                radial-gradient(1000px 700px at 10% -20%, rgba(107,79,52,.18), transparent 55%),
                var(--black);
    color:var(--text);
    overflow-x:hidden;
}
a{color:var(--sky)}
.container{width:min(1100px, 92%); margin-inline:auto}
.hero{
    position:relative; min-height:100vh; display:grid; place-items:center; text-align:center;
    padding:120px 16px 80px;
}
.hero-card{
    backdrop-filter: blur(10px);
    background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    border:1px solid rgba(255,255,255,.12);
    box-shadow: 0 10px 40px rgba(0,0,0,.4), var(--glow);
    border-radius:28px; padding:36px 24px; max-width:780px; margin:auto;
}
.badge{display:inline-block; padding:.4rem .8rem; border-radius:999px; background: rgba(111,183,255,.12); border:1px solid rgba(111,183,255,.35); color:var(--sky); font-weight:600; letter-spacing:.5px}
h1{font-size: clamp(28px, 4vw, 54px); margin:12px 0 10px; line-height:1.15}
.lead{font-size: clamp(15px, 2.1vw, 20px); color:#dbe7ff; opacity:.9}
.cta{margin-top:22px; display:flex; gap:12px; justify-content:center; flex-wrap:wrap}
.btn{
    cursor:pointer; border:0; border-radius:16px; padding:12px 18px; font-weight:700; font-size:16px;
    transition: transform .2s ease, box-shadow .2s ease, background .3s ease;
}
.btn-primary{background:linear-gradient(180deg, var(--sky), #77c3ff); color:#0b1220; box-shadow: 0 10px 24px rgba(111,183,255,.25)}
.btn-primary:hover{transform: translateY(-2px)}
.btn-ghost{background: rgba(107,79,52,.18); color:#f6eee6; border:1px solid rgba(107,79,52,.45)}
.btn-ghost:hover{transform: translateY(-2px)}
.floaters{position:absolute; inset:0; overflow:hidden; z-index:-1;}
.floater{position:absolute; width:22px; aspect-ratio:1/1; border-radius:50%;
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,.85), rgba(255,255,255,.15) 35%, rgba(111,183,255,.18) 60%, transparent 70%), var(--sky);
    box-shadow: 0 8px 20px rgba(111,183,255,.2);
    animation: rise linear infinite;
    opacity:.75;
}
.floater.heart{width:26px; background:none}
.floater.heart:before, .floater.heart:after{
    content:""; position:absolute; width:14px; height:22px; background:linear-gradient(180deg, #e56c9a, #a83257);
    border-radius:14px 14px 0 0; top:4px; left:6px;
    box-shadow: 0 6px 18px rgba(168,50,87,.35)
}
.floater.heart:after{transform:rotate(90deg); left:auto; right:6px}
@keyframes rise{from{transform:translateY(20vh) scale(.9)} to{transform:translateY(-110vh) scale(1.1)}}
section{padding:72px 0}
.section-card{background:var(--glass); border:1px solid rgba(255,255,255,.1); border-radius:24px; padding:28px; box-shadow: var(--glow)}
h2{font-size: clamp(22px, 3.2vw, 34px); margin:0 0 12px}
p{line-height:1.9; color:#eaeef6}
.slider{position:relative; overflow:hidden; border-radius:18px}
.slides{display:flex; transition: transform .6s ease}
.slide{min-width:100%}
.slide img{display:block; width:100%; height:380px; object-fit:cover}
.slider .nav{position:absolute; inset:0; display:flex; justify-content:space-between; align-items:center; padding:0 8px}
.icon-btn{background: rgba(0,0,0,.35); border:1px solid rgba(255,255,255,.22); color:#fff; border-radius:14px; width:44px; height:44px}
.letter{white-space:pre-wrap; font-size:19px; font-family: 'Scheherazade New', serif; color: #6fb7ff; opacity:.0; transition:opacity .6s ease; line-height:1.8;}
.letter.show{opacity:1}
.hidden {
    display: none;
}
#fireworks{position:fixed; inset:0; pointer-events:none; opacity:0; transition:opacity .4s ease}
#fireworks.show{opacity:1}
footer{padding:36px 0 60px; color:#bac6da; text-align:center}
.small{font-size:12px; opacity:.8}
.accent-brown{color:#f1e4d6; background:linear-gradient(180deg, rgba(107,79,52,.22), rgba(107,79,52,.1)); border:1px solid rgba(107,79,52,.45)}
.divider{height:1px; background:linear-gradient(90deg, rgba(111,183,255,.0), rgba(111,183,255,.35), rgba(111,183,255,.0)); margin:26px 0}
@media (max-width:520px){ .slide img{height:260px} }

/* New Login Page Styles */
.login-container {
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
}
.login-card {
    background: var(--glass);
    border: 1px solid rgba(255,255,255,.1);
    border-radius: 24px;
    padding: 40px;
    box-shadow: 0 10px 40px rgba(0,0,0,.4), var(--glow);
    max-width: 400px;
    width: 90%;
}
.login-card h2 {
    margin-bottom: 24px;
}
.login-card input {
    width: 100%;
    padding: 12px;
    margin-bottom: 16px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,.2);
    background-color: rgba(255,255,255,.1);
    color: var(--text);
    font-size: 16px;
}
.login-card input::placeholder {
    color: var(--muted);
    opacity: 0.7;
}
.login-card button {
    width: 100%;
    padding: 14px;
}
    </style>
</head>
<body>
    <div id="login-container" class="login-container">
        <div class="login-card">
            <h2>ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ğŸ”</h2>
            <input type="text" id="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Username)" required>
            <input type="password" id="password" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± (Password)" required>
            <button class="btn btn-primary" onclick="login()">Ø¯Ø®ÙˆÙ„ ğŸ‰</button>
        </div>
    </div>

    <div id="site-content" class="hidden">
        <audio id="bgm1" src="amr Diab.mp3" preload="auto"></audio>
        <audio id="bgm2" src="amr Diab2.mp3" preload="auto"></audio>
        <audio id="bgm3" src="amr Diab3.mp3" preload="auto"></audio>

        <header class="hero">
            <div class="floaters" id="floaters"></div>
            <div class="container">
                <div class="hero-card">
                    <span class="badge">ğŸ‚ Ù…ÙØ§Ø¬Ø£Ø© ØµØºÙŠØ±Ø© Ù„ÙƒÙ</span>
                    <h1>Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø³Ø¹ÙŠØ¯ ÙŠØ§ <span id="herName">Ø­Ø¨ÙŠØ¨ØªÙŠ</span> âœ¨</h1>
                    <p class="lead">Ø§Ù„ÙŠÙˆÙ… Ø¹ÙŠØ¯ Ù…ÙŠÙ„Ø§Ø¯ Ø§Ø¬Ù…Ù„ Ø§Ù†Ø³Ø§Ù†Ù‡ Ø¨Ø­ÙŠØ§ØªÙŠ ğŸ¤</p>
                    <div class="cta">
                        <button class="btn btn-primary play-btn" data-song="bgm1">Ø£ØºÙ†ÙŠØ© 1 â–¶</button>
                        <button class="btn btn-primary play-btn" data-song="bgm2">Ø£ØºÙ†ÙŠØ© 2 â–¶</button>
                        <button class="btn btn-primary play-btn" data-song="bgm3">Ø£ØºÙ†ÙŠØ© 3 â–¶</button>
                        <button class="btn btn-ghost" id="typeBtn">Ø§Ù‚Ø±Ø¦ÙŠ Ø±Ø³Ø§Ù„ØªÙŠ ğŸ’Œ</button>
                        <button class="btn accent-brown" id="surpriseBtn">Ø§Ø¶ØºØ·ÙŠ Ù‡Ù†Ø§ Ù„Ù„Ù…ÙØ§Ø¬Ø£Ø© ğŸ</button>
                    </div>
                </div>
            </div>
        </header>

        <main class="container">
            <section>
                <div class="section-card">
                    <h2>Ø£Ø­Ù„Ù‰ Ù„Ø­Ø¸Ø§ØªÙ†Ø§ ğŸ“¸</h2>
                    <div class="slider" id="slider">
                        <div class="slides" id="slides">
                            <div class="slide"><img src="images1.jpg.jpg" alt="Ø°ÙƒØ±Ù‰ 1"></div>
                        </div>
                        <div class="slides" id="slides">
                            <div class="slide"><img src="images2.jpg.jpg" alt="Ø°ÙƒØ±Ù‰ 2"></div>
                        </div>
                        <div class="slides" id="slides">
                            <div class="slide"><img src="images3.jpg.jpg" alt="Ø°ÙƒØ±Ù‰ 3"></div>
                        </div>
                        <div class="nav">
                            <button class="icon-btn" id="prev">â—€</button>
                            <button class="icon-btn" id="next">â–¶</button>
                        </div>
                    </div>
                </div>
            </section>

            <section>
                <div class="section-card">
                    <h2>Ø±Ø³Ø§Ù„Ø© Ù…Ù† Ù‚Ù„Ø¨ÙŠ ğŸ’™</h2>
                    <div id="letter" class="letter"></div>
                </div>
            </section>

            <section>
                <div class="section-card">
                    <h2>Ù‡Ø¯ÙŠØ© ØµØºÙŠØ±Ø© Ù„ÙƒÙ ğŸ€</h2>
                    <a href="https://youtu.be/K0eZkBPJ2RE" target="_blank" class="btn btn-primary">ØªØ´ØºÙŠÙ„ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ â–¶</a>
                </div>
            </section>
        </main>

        <canvas id="fireworks"></canvas>

        <footer>
            <div class="container">
                <p class="small">Ù…Ù† Ù…Ù†ØªØ¸Ø±<span style="color:var(--sky)">â¤ï¸</span> Ø¥Ù„Ù‰ <span id="herNameFooter">Ø­Ø¨ÙŠØ¨ØªÙŠ</span>. ØµÙ†Ø¹ Ø¨Ø­ÙØ¨ Ø¨Ø§Ù„Ø£Ù„ÙˆØ§Ù†: Ø§Ù„Ø£Ø³ÙˆØ¯ ÙˆØ§Ù„Ø¬ÙˆØ²ÙŠ ÙˆØ§Ù„Ø³Ù…Ø§ÙˆÙŠ.</p>
            </div>
        </footer>
    </div>

    <script>
        function login() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Correct credentials
            const correctUsername = 'zena2006';
            const correctPassword = 'zena2006';

            if (username === correctUsername && password === correctPassword) {
                document.getElementById('login-container').classList.add('hidden');
                document.getElementById('site-content').classList.remove('hidden');
            } else {
                alert('Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©. Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
            }
        }

        // ======== Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø§Ø³Ù… ========
        const herNameSpan = document.getElementById('herName');
        const herNameFooter = document.getElementById('herNameFooter');
        herNameSpan.textContent = 'Ø­Ø¨ÙŠØ¨ØªÙŠ';
        herNameFooter.textContent = 'Ø­Ø¨ÙŠØ¨ØªÙŠ';

        // ======== Ù…ÙˆØ³ÙŠÙ‚Ù‰ ========
        let currentAudio = null;
        document.querySelectorAll('.play-btn').forEach(btn => {
            btn.addEventListener('click', async (e) => {
                const audioId = e.target.dataset.song;
                const newAudio = document.getElementById(audioId);
                // Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„Ø£ØºÙ†ÙŠØ© Ø§Ù„Ø­Ø§Ù„ÙŠØ© Ø¥Ø°Ø§ ÙƒØ§Ù†Øª ØªØ¹Ù…Ù„
                if (currentAudio && currentAudio !== newAudio) {
                    currentAudio.pause();
                    currentAudio.currentTime = 0;
                }
                // ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£ØºÙ†ÙŠØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø£Ùˆ Ø¥ÙŠÙ‚Ø§ÙÙ‡Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ù‡ÙŠ Ù†ÙØ³Ù‡Ø§
                if (newAudio.paused) {
                    try {
                        await newAudio.play();
                        currentAudio = newAudio;
                    } catch (e) {
                        alert('Ù‚Ø¯ ÙŠØªØ·Ù„Ø¨ Ø§Ù„Ù…ØªØµÙØ­ ØªÙØ§Ø¹Ù„Ù‹Ø§ Ø¥Ø¶Ø§ÙÙŠÙ‹Ø§ Ù„ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª.');
                    }
                } else {
                    newAudio.pause();
                    newAudio.currentTime = 0;
                }
            });
        });

        // ======== Ù…Ø¤Ø«Ø± Ø§Ù„ÙƒØªØ§Ø¨Ø© (Ø±Ø³Ø§Ù„Ø©) ========
        const letterEl = document.getElementById('letter');
        const typeBtn = document.getElementById('typeBtn');
        const message = `Ù…Ù† ÙŠÙˆÙ… Ù…Ø§ Ø¯Ø®Ù„ØªÙŠ Ø­ÙŠØ§ØªÙŠ ÙˆØ§Ù†ÙŠ Ø§Ø­Ø³ Ø§Ù† Ø§Ù„Ø¯Ù†ÙŠØ§ ØµØ§Ø±Øª Ø§Ø¬Ù…Ù„ , ØµØ±Øª Ø§Ø´ÙˆÙ ÙƒÙ„ Ø´ÙŠ Ø¨Ø±ÙˆØ­ Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù„ÙŠØ§Ù†Ø© Ø­Ø¨ ÙˆØ§Ù…Ù„ , Ø§Ù†ØªÙŠ Ù…Ùˆ Ø¨Ø³ Ø§Ù†Ø³Ø§Ù†Ø© Ø¹Ø§Ø¯ÙŠØ© Ø¨Ø­ÙŠØ§ØªÙŠ , Ø§Ù†Øª Ø§Ù„Ù…Ø¹Ù†Ù‰ Ø§Ù„Ù„ÙŠ Ø®Ù„Ø§Ù†ÙŠ Ø§Ø¨ØªØ³Ù… Ù…Ù† Ø¬Ø¯ÙŠØ¯ , Ø§Ù„Ø§Ù„Ù‡Ø§Ù… Ø§Ù„Ù„ÙŠ ÙŠØ®Ù„ÙŠÙ†ÙŠ Ø§Ù‚Ø§ØªÙ„ ÙƒÙ„ ØµØ¹ÙˆØ¨Ø© ÙˆØ§Ø¨Ù‚Ù‰ Ù‚ÙˆÙŠ , ÙˆØ§Ù„Ø­Ù†Ø§Ù† Ø§Ù„Ù„ÙŠ ÙŠØ¯ÙÙŠÙ†ÙŠ Ø­ØªÙ‰ Ø¨Ø£ØµØ¹Ø¨ Ø§Ù„Ù„Ø­Ø¸Ø§Øª, Ø§Ù†ÙŠ Ù…Ù…ØªÙ† Ø­ÙŠÙ„ Ù„ÙˆØ¬ÙˆØ¯Ø¬ ÙˆÙŠØ§ÙŠØ© , Ù…Ù…ØªÙ† Ù„ÙƒÙ„ Ù„Ø­Ø¶Ø© Ø¹Ø´ØªÙ‡Ø§ ÙˆÙŠØ§Ø¬ , ÙˆÙ„ÙƒÙ„ ÙƒÙ„Ù…Ø© Ø­Ø¬ÙŠØªÙŠÙ‡Ø§ Ø§Ù„ÙŠ ÙˆØ·ÙŠØ¨Øª Ø®Ø§Ø·Ø±ÙŠ , ÙˆÙ„ÙƒÙ„ Ø¶Ø­ÙƒØ© Ø§Ø³Ù…Ø¹Ù‡Ø§ ÙˆØªØºÙŠØ± Ù†ÙØ³ÙŠØªÙŠ Ø§Ù†ØªÙŠ Ø§ØµÙ„Ø§ Ø§Ù„Ø·Ø§Ù‚Ø© Ø§Ù„ÙŠ Ø§Ø³ØªÙ…Ø± Ø¨ÙŠÙ‡Ø§ Ø¨Ù…ÙˆØ§Ø¬Ù‡Ø© Ù‡Ø°Ø§ Ø§Ù„Ø¹Ø§Ù„Ù…, Ø§Ù†ØªÙŠ ØºÙŠØ±ØªÙŠ Ø­ÙŠØ§ØªÙŠ ÙƒÙ„Ù‡Ø§ , Ø¹Ù„Ù…ØªÙŠÙ†ÙŠ Ø´Ù†Ùˆ ÙŠØ¹Ù†ÙŠ Ø§ÙƒÙˆÙ† Ø³Ø¹ÙŠØ¯ Ù…Ù† Ø§Ù„Ù‚Ù„Ø¨ , Ø´Ù†Ùˆ ÙŠØ¹Ù†ÙŠ Ø§Ù„ÙƒØ© Ø´Ø®Øµ ÙŠÙÙ‡Ù…Ù†ÙŠ ÙˆÙŠØ­Ø¨Ù†ÙŠ Ù…Ø«Ù„ Ù…Ø§ Ø§Ù†ÙŠ , Ø¨Ù„Ø§ Ø§ÙŠ Ø´Ø±ÙˆØ· Ø§Ùˆ Ø­Ø¯ÙˆØ¯. Ø£ØªÙ…Ù†Ù‰ Ø£Ø¨Ù‚Ù‰ Ø§Ù„Ø¹Ù…Ø± ÙƒÙ„Ù‡ ÙˆÙŠØ§Ø¬ , ÙˆØ§Ø­Ù‚Ù‚Ù„Ø¬ ÙƒÙ„Ø´ÙŠ ØªØªÙ…Ù†ÙŠ , ÙˆØ§ÙƒÙˆÙ† Ø³Ø¨Ø¨ ÙØ±Ø­ØªØ¬ Ù…Ø«Ù„ Ù…Ø§ Ø§Ù†ØªÙŠ Ø³Ø¨Ø¨ ÙØ±Ø­ØªÙŠ , ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ§Ù†ØªÙŠ Ø¨Ø£Ù„Ù Ø®ÙŠØ± ÙŠØ§ Ø§Ø¬Ù…Ù„ Ù‡Ø¯ÙŠØ© Ù…Ù† Ø±Ø¨ÙŠ , ÙŠØ§ Ù‚Ø·Ø¹Ø© Ù…Ù† Ø±ÙˆØ­ÙŠ ÙˆÙŠØ§ Ù†Ø¨Ø¶ Ù‚Ù„Ø¨ÙŠ , Ø§Ø­Ø¨Ø¬ Ø§ÙƒØ«Ø± Ù…Ù† Ù…Ø§ ØªØªØµÙˆØ±ÙŠÙ† , ÙˆØ§ÙˆØ¹Ø¯Ø¬ ØªØ¨Ù‚ÙŠÙ† Ø§Ù„Ø§ÙˆÙ„Ù‰ ÙˆØ§Ù„Ø§Ø®ÙŠØ±Ù‡ Ø¨Ø­ÙŠØ§ØªÙŠ`;
        function typeText(el, text, speed = 26) {
            el.textContent = '';
            el.classList.add('show');
            let i = 0;
            const timer = setInterval(() => {
                el.textContent += text[i++];
                if (i >= text.length) clearInterval(timer);
            }, speed);
        }
        typeBtn.addEventListener('click', () => typeText(letterEl, message));

        // ======== Ø¨Ø§Ù„ÙˆÙ†Ø§Øª/Ù‚Ù„ÙˆØ¨ Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© ========
        const floaters = document.getElementById('floaters');
        const colors = ['var(--sky)', '#a26d4a', '#77c3ff'];
        function spawnFloater() {
            const d = document.createElement('div');
            d.className = Math.random() > 0.6 ? 'floater heart' : 'floater';
            d.style.left = Math.random() * 100 + '%';
            d.style.bottom = '-40px';
            d.style.animationDuration = 8 + Math.random() * 8 + 's';
            if (!d.classList.contains('heart')) d.style.background = `radial-gradient(circle at 30% 30%, rgba(255,255,255,.85), rgba(255,255,255,.15) 35%, ${colors[Math.floor(Math.random()*colors.length)]} 60%, transparent 70%)`;
            floaters.appendChild(d);
            setTimeout(() => d.remove(), 17000);
        }
        setInterval(spawnFloater, 600);
        for (let i = 0; i < 18; i++) spawnFloater();

        // ======== Ø³Ù„Ø§ÙŠØ¯Ø± Ø¨Ø³ÙŠØ· ========
        const slides = document.getElementById('slides');
        const prev = document.getElementById('prev');
        const next = document.getElementById('next');
        let idx = 0;
        const count = slides.children.length;
        function updateSlide() {
            slides.style.transform = `translateX(-${idx * 100}%)`;
        }
        prev.addEventListener('click', () => {
            idx = (idx - 1 + count) % count;
            updateSlide();
        });
        next.addEventListener('click', () => {
            idx = (idx + 1) % count;
            updateSlide();
        });
        let startX = 0;
        let dragging = false;
        slides.addEventListener('touchstart', e => {
            dragging = true;
            startX = e.touches[0].clientX;
        });
        slides.addEventListener('touchmove', e => {
            if (!dragging) return;
            const dx = e.touches[0].clientX - startX;
            if (Math.abs(dx) > 60) {
                dragging = false;
                if (dx < 0) next.click();
                else prev.click();
            }
        });
        slides.addEventListener('touchend', () => dragging = false);

        // ======== Ø£Ù„Ø¹Ø§Ø¨ Ù†Ø§Ø±ÙŠØ© ========
        const canvas = document.getElementById('fireworks');
        const ctx = canvas.getContext('2d');
        let W, H;
        function resize() {
            W = canvas.width = innerWidth;
            H = canvas.height = innerHeight;
        }
        addEventListener('resize', resize);
        resize();
        class Particle {
            constructor(x, y, color) {
                this.x = x;
                this.y = y;
                this.color = color;
                this.vx = (Math.random() * 2 - 1) * 4;
                this.vy = (Math.random() * 2 - 1) * 4;
                this.life = 80 + Math.random() * 40;
                this.alpha = 1;
            }
            step() {
                this.x += this.vx;
                this.y += this.vy;
                this.vy += 0.03;
                this.life--;
                this.alpha = Math.max(0, this.life / 120);
            }
            draw() {
                ctx.globalAlpha = this.alpha;
                ctx.fillStyle = this.color;
                ctx.fillRect(this.x, this.y, 2, 2);
                ctx.globalAlpha = 1;
            }
        }
        let particles = [];
        let raf = null;
        let timeout = null;
        function burst(x, y) {
            const palette = ['#6fb7ff', '#a26d4a', '#ffffff', '#9dd1ff'];
            for (let i = 0; i < 160; i++) particles.push(new Particle(x, y, palette[Math.floor(Math.random() * palette.length)]));
        }
        function loop() {
            ctx.fillStyle = 'rgba(11,11,11,.25)';
            ctx.fillRect(0, 0, W, H);
            particles.forEach(p => {
                p.step();
                p.draw();
            });
            particles = particles.filter(p => p.life > 0);
            raf = requestAnimationFrame(loop);
        }
        function startFireworks() {
            canvas.classList.add('show');
            if (!raf) loop();
            clearTimeout(timeout);
            const shots = 8;
            for (let i = 0; i < shots; i++) setTimeout(() => burst(Math.random() * W, H * (.25 + .6 * Math.random())), i * 450);
            timeout = setTimeout(() => canvas.classList.remove('show'), 7000);
        }
        document.getElementById('surpriseBtn').addEventListener('click', startFireworks);
    </script>
</body>
</html>